<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/scroll.js - Scroll Horizontal</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Scroll Horizontal"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AutoRotation.html">AutoRotation</a></li>
            
                <li><a href="../classes/Scroll.html">Scroll</a></li>
            
                <li><a href="../classes/ScrollElementManual.html">ScrollElementManual</a></li>
            
                <li><a href="../classes/ScrollElementTag.html">ScrollElementTag</a></li>
            
                <li><a href="../classes/ScrollNavigator.html">ScrollNavigator</a></li>
            
                <li><a href="../classes/StaticSizeScroll.html">StaticSizeScroll</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js/scroll.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var ScrollElement = (function () {
    function ScrollElement() {
        this.hooks = [];
    }
    /**
    右側マージン変更&lt;br&gt;
    @method setMarginRight
    @param marginRight {number}
    @return void
    */
    ScrollElement.prototype.setMarginRight = function (marginRight) {
        this.marginRight = marginRight;
    };

    /**
    右側マージン変更&lt;br&gt;
    @method getMarginRight
    @return number
    */
    ScrollElement.prototype.getMarginRight = function () {
        return this.marginRight;
    };

    /**
    横幅変更&lt;br&gt;
    @method setWidth
    @return void
    */
    ScrollElement.prototype.setWidth = function (width) {
        this.width = width;
    };

    /**
    URL変更&lt;br&gt;
    @method setURL
    @param linkURL {string}
    @return void
    */
    ScrollElement.prototype.setURL = function (linkURL) {
        this.linkURL = linkURL;
    };

    /**
    リンククリック前にメソッドをフックする&lt;br&gt;
    @method setURL
    @param method {method}
    @return void
    */
    ScrollElement.prototype.addBeforeClickHook = function (method) {
        this.hooks.push(method);
    };

    /**
    要素取得&lt;br&gt;
    主にマネージャークラスから呼び出す&lt;br&gt;
    @method getElement
    @return HTMLElement
    */
    ScrollElement.prototype.getElement = function () {
        throw &quot;override&quot;;
    };
    return ScrollElement;
})();
var NothingValueError = (function () {
    function NothingValueError(message) {
        this.code = 100;
        this.message = message;
    }
    NothingValueError.prototype.getCode = function () {
        return this.code;
    };
    return NothingValueError;
})();
;

var ScrollNavigator = (function () {
    /**
    @class ScrollNavigator
    @param width  {number} NavigatorArea Width
    @param height {number} NavigatorArea Height
    @constructor
    */
    function ScrollNavigator(width, height) {
        this.elements = [];
    }
    /**
    @method addScrollNavigatorElement
    @param element {ScrollNavigatorElement}
    @return void
    */
    ScrollNavigator.prototype.addScrollNavigatorElement = function (element) {
        this.elements.push(element);
    };

    /**
    @method displayNavigator
    @return HTMLUListElement
    */
    ScrollNavigator.prototype.displayNavigator = function () {
        var ul = document.createElement(&quot;ul&quot;);
        for (var i = 0, arrayLength = this.elements.length; i &lt; arrayLength; i++) {
            var row = this.elements[i].getElement();
            ul.appendChild(row);
        }
        return ul;
    };

    /**
    @method moveAction
    @param event {event}
    @return void
    */
    ScrollNavigator.prototype.changeActive = function (activeIndexes) {
        var activeIndexesHash = {};
        for (var i = 0, arrayLength = activeIndexes.length; i &lt; arrayLength; i++) {
            var activeIndex = activeIndexes[i];
            activeIndexesHash[activeIndex] = true;
        }
        for (var i = 0, arrayLength = this.elements.length; i &lt; arrayLength; i++) {
            var row = this.elements[i];
            if (activeIndexesHash[i]) {
                row.changeActive();
            } else {
                row.changeNotActive();
            }
        }
    };
    return ScrollNavigator;
})();
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
// Add the missing definitions:
var ScrollButton = (function () {
    function ScrollButton() {
        this.hooks = [];
    }
    /**
    右側マージン変更&lt;br&gt;
    @method setMarginRight
    @param marginRight {number}
    @return void
    */
    ScrollButton.prototype.setMarginRight = function (marginRight) {
        this.marginRight = marginRight;
    };

    /**
    右側マージン変更&lt;br&gt;
    @method getMarginRight
    @return number
    */
    ScrollButton.prototype.getMarginRight = function () {
        return this.marginRight;
    };

    /**
    要素取得&lt;br&gt;
    主にマネージャークラスから呼び出す&lt;br&gt;
    @method getElement
    @return HTMLElement
    */
    ScrollButton.prototype.getButton = function () {
        throw &quot;must overrride&quot;;
    };
    return ScrollButton;
})();
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollElement.ts&quot; /&gt;
/// &lt;reference path=&quot;NothingValueError.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollNavigator.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollButton.ts&quot; /&gt;
// Add the missing definitions:
var Scroll = (function () {
    function Scroll(width, height) {
        /**
        @class Scroll
        @constructor
        @param width {number} ScrollArea Width
        @param height {number} ScrollArea Height
        */
        this.elements = [];
        this.DomElements = [];
        this.elementMarginRight = 20;
        this.moveBannersCount = 1;
        this.scrollSensitive = 10;
        this.currentFocusArea = 0;
        this.focusArea = [];
        this.displayedArea = [];
        this.initSizeFinished = false;
        this.useNavigator = false;
        this.createButton = false;
        this.widthAreaPercent = 100;
        this.moving = false;
        this.ulPaddingLeft = 10;
        this.locked = false;
        /**
        navigatorClassName
        @property navigatorClassName
        @type String
        @default &quot;navigator&quot;
        **/
        this.navigatorClassName = &quot;navigator&quot;;
        /**
        nextButtonClassName
        @property nextButtonClassName
        @type String
        @default &quot;nextButton&quot;
        **/
        this.nextButtonClassName = &quot;nextButton&quot;;
        /**
        previousButtonClassName
        @property previousButtonClassName
        @type String
        @default &quot;previousButton&quot;
        **/
        this.previousButtonClassName = &quot;previousButton&quot;;
        /**
        bannerListClassName
        @property bannerListClassName
        @type String
        @default &quot;bannerList&quot;
        **/
        this.bannerListClassName = &quot;bannerList&quot;;
        /**
        bannerListParentClassName
        @property bannerListParentClassName
        @type String
        @default &quot;bannerListParent&quot;
        **/
        this.bannerListParentClassName = &quot;bannerListParent&quot;;
        this.moveUnit = 10;
        /**
        バナー移動のアニメーションの単位移動時間をミリ秒で指定します。&lt;br&gt;
        default : 10
        
        @method setAnimationMoveUnitTime
        @param milliSeconds {number}
        @return void
        */
        this.animationUnit = 10;
        this.moveRightOne = function () {
            var thisObject = this;
            return function () {
                var bannerList = thisObject.bannerList;
                var left = bannerList.style.left;
                if (!left) {
                    var bannerListStyle = window.getComputedStyle(bannerList);
                    left = bannerListStyle.left;
                }
                var leftNumber = parseInt(left.replace(&quot;px&quot;, &quot;&quot;));
                while (leftNumber &lt; -1 * thisObject.allElementLength) {
                    leftNumber += thisObject.allElementLength;
                }

                var returnArray;
                for (var i = 0, arrayLength = thisObject.focusArea.length; i &lt; arrayLength; i++) {
                    var row = thisObject.focusArea[i];
                    var returnArrayInner = row(leftNumber);
                    if (returnArrayInner) {
                        returnArray = returnArrayInner;
                    }
                }

                thisObject.incremenetCurrentFocus();

                //var moveTo = returnArray[1] + leftNumber;
                var moveTo = returnArray[1] - returnArray[0];
                thisObject.moveToRight(moveTo * -1);
            };
        };
        this.moveLeftOne = function () {
            var thisObject = this;
            return function () {
                var bannerList = thisObject.bannerList;
                var left = bannerList.style.left;
                if (!left) {
                    var bannerListStyle = window.getComputedStyle(bannerList);
                    left = bannerListStyle.left;
                }
                var leftNumber = parseInt(left.replace(&quot;px&quot;, &quot;&quot;));
                while (leftNumber &lt; -1 * thisObject.allElementLength) {
                    leftNumber += thisObject.allElementLength;
                }

                var returnArray;
                for (var i = 0, arrayLength = thisObject.focusArea.length; i &lt; arrayLength; i++) {
                    var row = thisObject.focusArea[i];
                    returnArray = row(leftNumber);
                    if (returnArray) {
                        break;
                    }
                }
                thisObject.decremenetCurrentFocus();
                var moveTo = returnArray[0] + leftNumber;
                thisObject.moveToLeft(moveTo);
            };
        };
        this.width = width;
        this.height = height;
    }
    /**
    スクロールの感度を設定します。&lt;br&gt;
    タップ中移動したピクセルがこの数値以下の場合、水平方向に移動しません。&lt;br&gt;
    
    @method setScrollSensitive
    @param sensitive {number}
    @return void
    */
    Scroll.prototype.setScrollSensitive = function (sensitive) {
        this.scrollSensitive = sensitive;
    };

    Scroll.prototype.lock = function () {
        this.locked = true;
    };

    Scroll.prototype.incremenetCurrentFocus = function () {
        this.currentFocusArea += 1;
        if (this.currentFocusArea &gt; this.elements.length) {
            this.currentFocusArea -= this.elements.length;
        }
    };
    Scroll.prototype.decremenetCurrentFocus = function () {
        this.currentFocusArea -= 1;
        if (this.currentFocusArea &lt;= 0) {
            this.currentFocusArea += this.elements.length;
        }
    };

    /**
    左右のボタンを作成しないようにします。
    @method setNoCreateButton
    @return void
    */
    Scroll.prototype.setNoCreateButton = function () {
        this.createButton = false;
    };

    /**
    左右のボタンを作成するようにします。
    @method setCreateButton
    @return void
    */
    Scroll.prototype.setCreateButton = function () {
        this.createButton = true;
    };

    /**
    センター出しをします&lt;br&gt;
    
    @method setScrollCenter
    @param  distanceLeft {number}
    @return void
    */
    Scroll.prototype.setScrollCenter = function (distanceLeft) {
        this.ulPaddingLeft = distanceLeft;
        this.bannerList.style.paddingLeft = distanceLeft + &quot;px&quot;;
    };

    /**
    バナー移動のアニメーションの単位移動ピクセルを指定します。。&lt;br&gt;
    default : 10
    
    @method setAnimationMoveUnitDistance
    @param moveUnit {number}
    @return void
    */
    Scroll.prototype.setAnimationMoveUnitDistance = function (moveUnit) {
        this.moveUnit = moveUnit;
    };

    /**
    水平方向の画像移動時に、count個分移動します。。&lt;br&gt;
    default : 1
    
    @method setMoveBannersCount
    @param count {number}
    @return void
    */
    Scroll.prototype.setMoveBannersCount = function (count) {
        this.moveBannersCount = count;
    };

    Scroll.prototype.setAnimationMoveUnitTime = function (millSeconds) {
        this.animationUnit = millSeconds;
    };

    /**
    画像間のマージンを指定します。実態は画像右側のマージンです。&lt;br&gt;
    default : 20
    
    @method setMarginRight
    @param marginRight {number}
    @return void
    */
    Scroll.prototype.setMarginRight = function (marginRight) {
        this.elementMarginRight = marginRight;
    };

    /**
    右ボタン、左ボタンの画像のパスをしていします。&lt;br&gt;
    
    @method setButtons
    @param leftButton {ScrollButton} 左に進むボタンURL
    @param rightButton {ScrollButton} 右に進むボタンURL
    
    @return void
    */
    Scroll.prototype.setButtons = function (leftButton, rightButton) {
        this.createButton = true;
        this.leftButton = leftButton;
        this.rightButton = rightButton;
    };

    /**
    スクロールエリアに表示する画像エレメントを追加します。&lt;br&gt;
    
    @method addScrollElement
    @param scrollElement {ScrollElement}
    @return void
    */
    Scroll.prototype.addScrollElement = function (scrollElement) {
        this.elements.push(scrollElement);
    };

    /**
    スクロールエリア、左右ボタンエリアを含むDiv要素を返します。
    
    @method create
    @return HTMLDivElement
    */
    Scroll.prototype.create = function () {
        var scrollObject = this.createList();
        var div = document.createElement(&quot;div&quot;);
        div.style.width = this.width ? this.width + &quot;px&quot; : &quot;100%&quot;;
        div.style.height = this.height + &quot;px&quot;;
        div.appendChild(scrollObject);
        if (this.createButton) {
            var buttons = this.createButtons();
            div.appendChild(buttons);
        }

        return div;
    };

    Scroll.prototype.createButtons = function () {
        var thisObject = this;

        var leftButton = this.leftButton.getButton();
        leftButton.className = this.previousButtonClassName;
        leftButton.addEventListener(&#x27;click&#x27;, this.moveLeftOne(), false);

        var rightButton = this.rightButton.getButton();
        rightButton.className = this.nextButtonClassName;
        rightButton.addEventListener(&#x27;click&#x27;, this.moveRightOne(), false);

        var ul = document.createElement(&quot;ul&quot;);
        ul.appendChild(document.createElement(&quot;li&quot;).appendChild(leftButton));

        if (this.useNavigator) {
            var navigatorElement = this.navigator.displayNavigator();
            var navigatorLi = document.createElement(&quot;li&quot;);
            navigatorLi.appendChild(navigatorElement);
            navigatorLi.className = this.navigatorClassName;
            ul.appendChild(navigatorLi);
        }

        ul.appendChild(document.createElement(&quot;li&quot;).appendChild(rightButton));
        return ul;
    };

    Scroll.prototype.createList = function () {
        var ul = document.createElement(&quot;ul&quot;);
        this.focusArea = [];
        this.DomElements = [];

        for (var j = 0; j &lt; 3; j++) {
            for (var i = 0, arrayLength = this.elements.length; i &lt; arrayLength; i++) {
                var element = this.elements[i];
                var previousElement = this.elements[i - 1];
                var htmlElement = element.getElement();

                var elementMarginRight = element.getMarginRight();
                if (elementMarginRight) {
                    htmlElement.style.marginRight = elementMarginRight + &quot;px&quot;;
                } else {
                    htmlElement.style.marginRight = this.elementMarginRight + &quot;px&quot;;
                }
                htmlElement.style.marginLeft = &quot;0px&quot;;

                ul.appendChild(htmlElement);
                this.DomElements.push(htmlElement);
            }
        }
        ul.className = this.bannerListClassName;
        ul.style.paddingLeft = this.ulPaddingLeft + &quot;px&quot;;
        this.bannerList = ul;

        var divInner = document.createElement(&quot;div&quot;);
        divInner.style.border = &quot;solid 1px black&quot;;
        divInner.className = this.bannerListParentClassName;
        divInner.appendChild(ul);

        var initX = null;
        var thisObject = this;

        divInner.addEventListener(&quot;touchstart&quot;, function (e) {
            if (thisObject.moving) {
                return;
            }
            var touch = e.touches[0];
            thisObject.firstMove = true;
            initX = touch.pageX;
        }, false);

        divInner.addEventListener(&quot;touchmove&quot;, function (e) {
            var touch = e.touches[0];
            if (!thisObject.firstMove) {
                return false;
            }
            thisObject.firstMove = false;

            var currentX = touch.pageX;

            var bannerList = thisObject.bannerList;
            var left = bannerList.style.left;
            if (!left) {
                var bannerListStyle = window.getComputedStyle(bannerList);
                left = bannerListStyle.left;
            }
            var leftNumber = parseInt(left.replace(&quot;px&quot;, &quot;&quot;));
            while (leftNumber &lt; -1 * thisObject.allElementLength) {
                leftNumber += thisObject.allElementLength;
            }

            var returnArray;
            if (currentX - initX &lt; -1 * thisObject.scrollSensitive) {
                if (!thisObject.moving) {
                    e.preventDefault();
                }
                for (var i = 0, arrayLength = thisObject.focusArea.length; i &lt; arrayLength; i++) {
                    var row = thisObject.focusArea[i];
                    returnArray = row(leftNumber);
                    if (returnArray) {
                        break;
                    }
                }

                thisObject.incremenetCurrentFocus();
                var moveTo = returnArray[0] + leftNumber;
                thisObject.moveToRight(moveTo);
            } else if (currentX - initX &gt; thisObject.scrollSensitive) {
                if (!thisObject.moving) {
                    e.preventDefault();
                }
                for (var i = 0, arrayLength = thisObject.focusArea.length; i &lt; arrayLength; i++) {
                    var row = thisObject.focusArea[i];
                    var returnArrayInner = row(leftNumber);
                    if (returnArrayInner) {
                        returnArray = returnArrayInner;
                    }
                }

                thisObject.decremenetCurrentFocus();
                var moveTo = returnArray[1] - returnArray[0];
                thisObject.moveToLeft(moveTo * -1);
            } else {
            }
        }, false);

        divInner.addEventListener(&quot;touchend&quot;, function (e) {
            e.defaultPrevented = false;
        }, false);

        this.bannerListParent = divInner;
        return divInner;
    };

    Scroll.prototype.initSize = function () {
        if (this.initSizeFinished) {
            return;
        }
        this.locked = false;
        this.displayedArea = [];
        this.focusArea = [];
        this.initSizeFinished = true;
        var elements = this.DomElements;
        var arrayLength = elements.length;
        var allWidth = 0;
        var moveBannersCount = this.moveBannersCount;
        var thisObject = this;

        var createFunction = function (start, end, moveToLeft, moveToRight) {
            return function (left) {
                left *= -1;
                if (start &lt;= left &amp;&amp; end &gt;= left) {
                    return [moveToLeft, moveToRight];
                } else {
                    return null;
                }
            };
        };

        var createFunctionDisplayedArea = function (start, end) {
            return function (left) {
                var width = thisObject.width ? thisObject.width : parseInt(thisObject.bannerListParent.style.width);
                var allWidth = thisObject.allElementLength;

                while (end &gt; allWidth) {
                    end -= allWidth;
                    start -= allWidth;
                }

                if (left &lt;= start &amp;&amp; left + width &gt;= end) {
                    return true;
                }

                if (left &lt;= start &amp;&amp; left + width &gt; start &amp;&amp; left + width &lt; end) {
                    var displayedEnd = left + width;
                    var percent = 100 * (displayedEnd - start) / (end - start);
                    if (thisObject.widthAreaPercent &lt;= percent) {
                        return true;
                    }
                    return false;
                }

                if (left &gt; start &amp;&amp; left + width &gt;= end &amp;&amp; end &gt; left) {
                    var displayedStart = left;
                    var percent = 100 * (end - displayedStart) / (end - start);
                    if (thisObject.widthAreaPercent &lt;= percent) {
                        return true;
                    }
                    return false;
                }

                left -= allWidth;

                if (left &lt;= start &amp;&amp; left + width &gt;= end) {
                    return true;
                }

                if (left &lt;= start &amp;&amp; left + width &gt; start &amp;&amp; left + width &lt; end) {
                    var displayedEnd = left + width;
                    var percent = 100 * (displayedEnd - start) / (end - start);
                    if (thisObject.widthAreaPercent &lt;= percent) {
                        return true;
                    }
                    return false;
                }

                if (left &gt; start &amp;&amp; left + width &gt;= end &amp;&amp; end &gt; left) {
                    var displayedStart = left;
                    var percent = 100 * (end - displayedStart) / (end - start);
                    if (thisObject.widthAreaPercent &lt;= percent) {
                        return true;
                    }
                    return false;
                }

                // left ~ left - widthが表示領域
                return false;
            };
        };

        var $ul = $(this.bannerList);
        var ulPaddingLeft = parseInt($ul.css(&#x27;padding-left&#x27;));

        for (var i = 0, arrayLength = elements.length; i &lt; arrayLength; i++) {
            var row = elements[i];

            var allWidthInit = allWidth;

            allWidth += parseInt($(row).css(&quot;margin-right&quot;)) + parseInt($(row).css(&quot;width&quot;));

            var allWidthMoveToRight = allWidth;
            var allWidthMoveToLeft = allWidth;

            for (var z = 0; z &lt; moveBannersCount - 1; z++) {
                allWidthMoveToRight += parseInt($(row).css(&quot;margin-right&quot;)) + parseInt($(row).css(&quot;width&quot;));
            }

            var allWidthMoveToLeft = allWidth;
            for (var z = 0; z &lt; moveBannersCount; z++) {
                var count = z;
                while (count &lt; 0) {
                    count += arrayLength;
                }
                allWidthMoveToLeft -= parseInt($(row).css(&quot;margin-right&quot;)) + parseInt($(row).css(&quot;width&quot;));
            }
            thisObject.focusArea.push(createFunction(allWidthInit, allWidth, allWidthMoveToLeft, allWidthMoveToRight));

            thisObject.displayedArea.push(createFunctionDisplayedArea(allWidthInit + ulPaddingLeft, allWidth + ulPaddingLeft));
            if ((i + 1) % (arrayLength / 3) == 0) {
                thisObject.allElementLength = allWidth;
                thisObject.initAllElementLength = -1 * allWidth;
                allWidth = 0;
            }
        }

        $(this.bannerList).css(&quot;left&quot;, this.initAllElementLength + &quot;px&quot;);
        if (thisObject.useNavigator) {
            thisObject.navigator.changeActive(thisObject.getDisplayedBanners());
        }
    };

    /**
    @method setNavigatorElements
    @return HTMLUlistElement
    */
    Scroll.prototype.setNavigatorElements = function (navigatorElements, width, height) {
        var navigator = new ScrollNavigator(width, height);
        for (var i = 0, arrayLength = navigatorElements.length; i &lt; arrayLength; i++) {
            var row = navigatorElements[i];
            navigator.addScrollNavigatorElement(row);
        }
        this.useNavigator = true;
        this.navigator = navigator;
    };

    Scroll.prototype.moveToRight = function (movePixel) {
        if (this.moving) {
            return;
        }
        if (this.locked) {
            return;
        }
        this.moving = true;
        var movePixelAbsolute = movePixel &gt; 0 ? movePixel : movePixel * -1;
        var moveUnit = this.moveUnit;
        var animationUnit = this.animationUnit;
        var bannerList = this.bannerList;
        var allElementLength = this.allElementLength;

        var thisObject = this;

        var moveId = 1;
        var stopMoveId = {};

        var scrollFunction = function (e) {
            stopMoveId[moveId] = true;
            var scrollMoveId = 2;
            move(scrollMoveId);
        };
        var move = function (moveId) {
            if (stopMoveId[moveId]) {
                return;
            }
            if (movePixelAbsolute &gt; moveUnit) {
                movePixelAbsolute -= moveUnit;
            } else {
                moveUnit = movePixelAbsolute;
                movePixelAbsolute = 0;
                if (thisObject.useNavigator) {
                    thisObject.navigator.changeActive(thisObject.getDisplayedBanners());
                }
            }
            var left = bannerList.style.left;
            if (!left) {
                var bannerListStyle = window.getComputedStyle(bannerList);
                left = bannerListStyle.left;
            }
            var leftNumber = parseInt(left.replace(&quot;px&quot;, &quot;&quot;));
            if (movePixel &gt; 0) {
                leftNumber += moveUnit;
            } else {
                leftNumber -= moveUnit;
            }

            if (leftNumber &gt;= 0) {
                leftNumber -= allElementLength;
            } else if (leftNumber &lt;= -2 * allElementLength) {
                leftNumber += allElementLength;
            }
            bannerList.style.left = leftNumber + &quot;px&quot;;

            if (movePixelAbsolute &gt; 0) {
                setTimeout(function () {
                    move(moveId);
                }, animationUnit);
            } else {
                setTimeout(function () {
                    thisObject.firstMove = true;
                    thisObject.moving = false;
                    window.removeEventListener(&quot;scroll&quot;, scrollFunction);
                }, 100);
            }
        };
        move(moveId);
        window.addEventListener(&quot;scroll&quot;, scrollFunction);
    };

    Scroll.prototype.moveToLeft = function (movePixel) {
        this.moveToRight(-1 * movePixel);
    };

    Scroll.prototype.scroll = function () {
        return function (e) {
            return false;
        };
    };

    /**
    表示されている横幅がpercentより大きければ、ナビゲーション上で表示されている状態とする
    @method setWidthAreaPercent
    @param percent {number}
    @return void
    */
    Scroll.prototype.setWidthAreaPercent = function (percent) {
        this.widthAreaPercent = percent;
    };

    Scroll.prototype.getDisplayedBanners = function () {
        var displayed = [];

        var bannerList = this.bannerList;
        var left = bannerList.style.left;
        if (!left) {
            var bannerListStyle = window.getComputedStyle(bannerList);
            left = bannerListStyle.left;
        }
        var leftNumber = parseInt(left.replace(&quot;px&quot;, &quot;&quot;));
        leftNumber *= -1;
        while (leftNumber &gt;= this.allElementLength) {
            leftNumber -= this.allElementLength;
        }
        var elementCount = this.focusArea.length / 3;
        for (var i = 0, arrayLength = this.focusArea.length; i &lt; arrayLength; i++) {
            var row = this.displayedArea[i];
            if (row(leftNumber)) {
                var j = i;
                while (j &gt; elementCount) {
                    j -= elementCount;
                }
                displayed.push(j);
            }
        }

        return displayed;
    };

    /**
    プラグインをロードしてmixinする&lt;br&gt;
    引き数にはプラグインのクラス名を指定する
    @method loadPlugin
    @param pluginName {string}
    @return void
    */
    Scroll.prototype.loadPlugin = function (pluginName) {
        eval(&quot;new &quot; + pluginName + &quot;(this)&quot;);
    };
    return Scroll;
})();
var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollElement.ts&quot; /&gt;
var ScrollElementJQuery = (function (_super) {
    __extends(ScrollElementJQuery, _super);
    function ScrollElementJQuery(jQueryObject) {
        _super.call(this);
        this.jQueryObject = jQueryObject;
        this.width = parseInt(jQueryObject.css(&quot;width&quot;));
        this.height = parseInt(jQueryObject.css(&quot;height&quot;));
    }
    /**
    右側マージン変更&lt;br&gt;
    @method setMarginRight
    @param marginRight {number}
    @return void
    */
    /**
    右側マージン変更&lt;br&gt;
    @method getMarginRight
    @return number
    */
    /**
    URL変更&lt;br&gt;
    @method setURL
    @param linkURL {string}
    @return void
    */
    /**
    リンククリック前にメソッドをフックする&lt;br&gt;
    @method setURL
    @param method {method}
    @return void
    */
    /**
    要素取得&lt;br&gt;
    主にマネージャークラスから呼び出す&lt;br&gt;
    @method getElement
    @return HTMLElement
    */
    ScrollElementJQuery.prototype.getElement = function () {
        this.jQueryObject.removeClass(&quot;scrollElement&quot;);
        this.jQueryObject.addClass(&quot;scrollElement&quot;);
        var returnElement = this.jQueryObject.clone(true).get()[0];
        if (returnElement.tagName == &quot;A&quot;) {
            returnElement.childNodes[0].style.width = this.width + &quot;px&quot;;
        } else {
            returnElement.style.width = this.width + &quot;px&quot;;
        }
        returnElement.style.width = this.width + &quot;px&quot;;
        return returnElement;
    };
    return ScrollElementJQuery;
})(ScrollElement);
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollElement.ts&quot; /&gt;
// Add the missing definitions:
var ScrollElementManual = (function (_super) {
    __extends(ScrollElementManual, _super);
    /**
    @class ScrollElementManual
    @constructor
    @param imgSrc {string} banner url
    @param linkURL {string} banner link url
    @param width {number} ScrollArea Width
    @param height {number} ScrollArea Height
    @param marginRight {number} Optional marginRight
    */
    function ScrollElementManual(imgSrc, linkURL, width, height, marginRight) {
        _super.call(this);
        this.imgSrc = imgSrc;
        this.linkURL = linkURL;
        this.width = width;
        this.height = height;
        if (marginRight) {
            this.marginRight = marginRight;
        }
    }
    /**
    右側マージン変更&lt;br&gt;
    @method setMarginRight
    @param marginRight {number}
    @return void
    */
    /**
    右側マージン変更&lt;br&gt;
    @method getMarginRight
    @return number
    */
    /**
    URL変更&lt;br&gt;
    @method setURL
    @param linkURL {string}
    @return void
    */
    /**
    リンククリック前にメソッドをフックする&lt;br&gt;
    @method setURL
    @param method {method}
    @return void
    */
    /**
    要素取得&lt;br&gt;
    主にマネージャークラスから呼び出す&lt;br&gt;
    @method getElement
    @return HTMLElement
    */
    ScrollElementManual.prototype.getElement = function () {
        var img = document.createElement(&quot;img&quot;);
        var a = document.createElement(&quot;a&quot;);
        img.src = this.imgSrc;
        img.style.width = this.width + &quot;px&quot;;
        img.style.height = this.height + &quot;px&quot;;
        a.href = this.linkURL;
        a.appendChild(img);
        a.className = &quot;scrollElement&quot;;
        return a;
    };
    return ScrollElementManual;
})(ScrollElement);
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollElementJQuery.ts&quot; /&gt;
var ScrollElementTag = (function (_super) {
    __extends(ScrollElementTag, _super);
    /**
    @class ScrollElementTag
    @constructor
    @param HTMLTag {string} タグ文字列。そのままjQueryに食わせる
    */
    function ScrollElementTag(tag) {
        _super.call(this, jQuery(tag));
    }
    return ScrollElementTag;
})(ScrollElementJQuery);
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollNavigatorElement.ts&quot; /&gt;
// Add the missing definitions:
var ScrollNavigatorElementImage = (function () {
    /**
    @class Scroll
    @constructor
    @param width {number} ScrollArea Width
    @param height {number} ScrollArea Height
    */
    function ScrollNavigatorElementImage(width, height, activeImageSrc, notActiveImageSrc) {
        this.width = width;
        this.height = height;
        this.activeImageSrc = activeImageSrc;
        this.notActiveImageSrc = notActiveImageSrc;
    }
    ScrollNavigatorElementImage.prototype.getElement = function () {
        var element = document.createElement(&quot;img&quot;);
        element.src = this.notActiveImageSrc;
        this.element = element;
        return element;
    };
    ScrollNavigatorElementImage.prototype.changeActive = function () {
        (this.element).src = this.activeImageSrc;
    };
    ScrollNavigatorElementImage.prototype.changeNotActive = function () {
        (this.element).src = this.notActiveImageSrc;
    };
    return ScrollNavigatorElementImage;
})();
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollButton.ts&quot; /&gt;
// Add the missing definitions:
var ScrollButtonImage = (function (_super) {
    __extends(ScrollButtonImage, _super);
    function ScrollButtonImage(imageSrc) {
        _super.call(this);
        this.imageSrc = imageSrc;
    }
    /**
    要素取得&lt;br&gt;
    主にマネージャークラスから呼び出す&lt;br&gt;
    @method getButton
    @return HTMLElement
    */
    ScrollButtonImage.prototype.getButton = function () {
        var button = document.createElement(&quot;button&quot;);
        var image = document.createElement(&quot;img&quot;);
        image.src = this.imageSrc;
        button.appendChild(image);
        return button;
    };
    return ScrollButtonImage;
})(ScrollButton);
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollButton.ts&quot; /&gt;
// Add the missing definitions:
var ScrollButtonJQuery = (function (_super) {
    __extends(ScrollButtonJQuery, _super);
    function ScrollButtonJQuery(jQueryElement) {
        _super.call(this);
        this.jQueryElement = jQueryElement;
    }
    /**
    要素取得&lt;br&gt;
    主にマネージャークラスから呼び出す&lt;br&gt;
    @method getElement
    @return HTMLElement
    */
    ScrollButtonJQuery.prototype.getButton = function () {
        return this.jQueryElement.get()[0];
    };
    return ScrollButtonJQuery;
})(ScrollButton);
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;ScrollButtonJQuery.ts&quot; /&gt;
// Add the missing definitions:
var ScrollButtonTag = (function (_super) {
    __extends(ScrollButtonTag, _super);
    /**
    @class Scroll
    @constructor
    @param width {number} ScrollArea Width
    @param height {number} ScrollArea Height
    */
    function ScrollButtonTag(tag) {
        _super.call(this, jQuery(tag));
    }
    return ScrollButtonTag;
})(ScrollButtonJQuery);
/// &lt;reference path=&quot;jquery.d.ts&quot; /&gt;
/// &lt;reference path=&quot;Scroll.ts&quot; /&gt;
// Add the missing definitions:
var StaticSizeScroll = (function (_super) {
    __extends(StaticSizeScroll, _super);
    /**
    @class StaticSizeScroll
    @constructor
    @param width {number} ScrollArea Width
    @param height {number} ScrollArea Height
    @param bannerWidth {number} bannerWidth
    @param bannerDisplayCount {number} バナー表示数 でフォルト1
    */
    function StaticSizeScroll(width, height, bannerWidth, bannerMarginRight, bannerDisplayCount) {
        _super.call(this, width, height);

        this.bannerWidth = bannerWidth;
        this.bannerMarginRight = bannerMarginRight;
        bannerDisplayCount = bannerDisplayCount || 1;
        this.bannerDisplayCount = bannerDisplayCount;
        if (width &amp;&amp; bannerDisplayCount * bannerWidth + (bannerDisplayCount - 1) * bannerMarginRight &gt; width) {
            throw (&quot;widthが足りません&quot;);
        }
    }
    StaticSizeScroll.prototype.addScrollElement = function (scrollElement) {
        scrollElement.setWidth(this.bannerWidth);
        scrollElement.setMarginRight(this.bannerMarginRight);
        this.elements.push(scrollElement);
    };

    StaticSizeScroll.prototype.setMarginRight = function (marginRight) {
        _super.prototype.setMarginRight.call(this, marginRight);

        var displayedElements = this.DomElements;
        for (var i = 0, arrayLength = displayedElements.length; i &lt; arrayLength; i++) {
            var htmlElement = displayedElements[i];
            htmlElement.style.marginRight = this.elementMarginRight + &quot;px&quot;;
        }
        this.bannerMarginRight = marginRight;
    };

    StaticSizeScroll.prototype.resize = function () {
        this.initSizeFinished = false;
        this.width = null;
        this.initSize();
        this.changeFocus();
    };

    StaticSizeScroll.prototype.initSize = function () {
        this.setCenter();
        _super.prototype.initSize.call(this);
    };

    StaticSizeScroll.prototype.changeFocus = function () {
        var moveTo = this.currentFocusArea * this.bannerWidth + (this.currentFocusArea) * this.bannerMarginRight;
        $(this.bannerList).css(&quot;left&quot;, (this.initAllElementLength - moveTo) + &quot;px&quot;);

        if (this.useNavigator) {
            this.navigator.changeActive(this.getDisplayedBanners());
        }
    };

    StaticSizeScroll.prototype.setCenter = function () {
        if (!this.width) {
            this.width = parseInt($(this.bannerListParent).css(&quot;width&quot;));
        }
        console.log(this.width);
        var distanceLeft = (this.width - (this.bannerDisplayCount * this.bannerWidth + (this.bannerDisplayCount - 1) * this.bannerMarginRight)) / 2;
        this.setScrollCenter(distanceLeft);
    };
    return StaticSizeScroll;
})(Scroll);
/// &lt;reference path=&quot;Scroll.ts&quot; /&gt;
var AutoRotation = (function () {
    function AutoRotation(scrollObject) {
        /**
        自動で回転を行う。及び回転開始、回転停止等の関数を提供する
        @class AutoRotation
        @constructor scrollObject {Scroll}
        */
        this.intervalSeconds = 4000;
        this.toRight = true;
        this.initSizerewritten = false;
        var thisObject = this;
        scrollObject[&quot;start&quot;] = function () {
            if (!thisObject.initSizerewritten) {
                var initSizeFunction = scrollObject.initSize;

                if (scrollObject[&quot;initSizeStack&quot;] == null) {
                    scrollObject[&quot;initSizeStack&quot;] = [];
                    scrollObject[&quot;initSizeStack&quot;].push(scrollObject.initSize);
                    scrollObject[&quot;initSize&quot;] = null;
                }
                scrollObject.initSize = function () {
                    scrollObject[&quot;initSizeStack&quot;].push(function () {
                        if (thisObject.toRight) {
                            thisObject.intervalID = setInterval(scrollObject.moveRightOne(), thisObject.intervalSeconds);
                        } else {
                            thisObject.intervalID = setInterval(scrollObject.moveLeftOne(), thisObject.intervalSeconds);
                        }
                    });

                    for (var i = 0, arrayLength = scrollObject[&quot;initSizeStack&quot;].length; i &lt; arrayLength; i++) {
                        var stackFunction = scrollObject[&quot;initSizeStack&quot;][i];
                        scrollObject[&quot;tempFunction&quot;] = stackFunction;
                        scrollObject[&quot;tempFunction&quot;]();
                    }
                    scrollObject[&quot;tempFunction&quot;] = null;

                    var resetInterval = function (e) {
                        if (!scrollObject.firstMove) {
                            return false;
                        }
                        clearInterval(thisObject.intervalID);

                        if (thisObject.toRight) {
                            thisObject.intervalID = setInterval(scrollObject.moveRightOne(), thisObject.intervalSeconds);
                        } else {
                            thisObject.intervalID = setInterval(scrollObject.moveLeftOne(), thisObject.intervalSeconds);
                        }
                    };

                    this.bannerListParent.addEventListener(&quot;touchmove&quot;, resetInterval);
                    this.leftButton.getButton().addEventListener(&quot;click&quot;, resetInterval);
                    this.rightButton.getButton().addEventListener(&quot;click&quot;, resetInterval);
                };
                thisObject.initSizerewritten = true;
            } else {
                clearInterval(thisObject.intervalID);
                if (thisObject.toRight) {
                    thisObject.intervalID = setInterval(scrollObject.moveRightOne(), thisObject.intervalSeconds);
                } else {
                    thisObject.intervalID = setInterval(scrollObject.moveLeftOne(), thisObject.intervalSeconds);
                }
            }
        };
        scrollObject[&quot;stop&quot;] = function () {
            if (this.intervalID) {
                clearInterval(this.intervalID);
                this.intervalID = null;
            }
        };
        scrollObject[&quot;setInterval&quot;] = function (intervalSeconds) {
            thisObject.intervalSeconds = intervalSeconds;
        };
        scrollObject[&quot;setMoveToRight&quot;] = function () {
            thisObject.toRight = true;
        };
        scrollObject[&quot;setMoveToLeft&quot;] = function () {
            thisObject.toRight = false;
        };
        scrollObject[&quot;start&quot;]();
    }
    return AutoRotation;
})();

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
